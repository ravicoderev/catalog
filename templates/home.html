
<html>
        <head>
                <link rel=stylesheet type=text/css href="{{ url_for('static', filename='styles.css') }}">
        </head>
	
    
    <h1> ZZ Sporting Goods </h1>
    <h1>
        <!--LOAD PRE-REQUISITES FOR GOOGLE SIGN IN -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"> </script>
        <script src="//apis.google.com/js/platform.js?onload=start"> </script>

        <!-- END PRE-REQUISITES FOR GOOGLE SIGN IN -->
    </h1>
        
    <hr>
	
		<body>

            <!-- GOOGLE PLUS SIGN IN BUTTON-->

          
          <div id="signinButton">
                <span class="g-signin"
                  data-scope="openid email"
                  data-clientid="578211746527-a0vjl25g7re3adm71e5m45b9pmp6kr4q.apps.googleusercontent.com"
                  data-redirecturi="postmessage"
                  data-accesstype="offline"
                  data-cookiepolicy="single_host_origin"
                  data-callback="signInCallback"
                  data-approvalprompt="force">
                </span>
                <h2> You have 'View Only' feature. SIGN IN to unlock features !!!</h2>
              </div>
      
      
          <div id="result"></div>
          <script>
                  function signInCallback(authResult) {
                    if (authResult['code']) {
                          // Hide the sign-in button now that the user is authorized
                          $('#signinButton').attr('style', 'display: none');
                          // Send the one-time-use code to the server, if the server responds, write a 'login successful' message to the web page and then redirect back to the main restaurants page
                          $.ajax({
                          type: 'POST',
                          url: '/gconnect?state={{STATE}}',
                          processData: false,
                          data: authResult['code'],
                          contentType: 'application/octet-stream; charset=utf-8',
                          data: authResult['code'],
                          success: function(result) {
                              // Handle or verify the server response if necessary.
                              if (result) {
                              $('#result').html('Login Successful!</br>'+ result + '</br>Redirecting...')
                              setTimeout(function() {
                              window.location.href = "/category";
                              }, 4000);
                              
                              } else if (authResult['error']) {
                                  console.log('There was an error: ' + authResult['error']);
                                  } else {
                                      $('#result').html('Failed to make a server-side call. Check your configuration and console.');
                                      }
                          }
                          
                          }); 
                    
                    } 
                    
                    }
          </script>
           
      
      <!--END GOOGLE PLUS SIGN IN BUTTON -->
	
			<div class = 'flash'>
				{% with messages = get_flashed_messages() %}
					{% if messages %}
	
						<ul>
						{% for message in messages %}
							<li> <strong> {{ message }} </strong> </li>
						{% endfor %}
						</ul>
					{% endif %}
				{% endwith %}
	
			</div>
				
			<div class = 'name'>
                <div class = 'categories'>
                        <header>
                                <h2 class="font-weight-light">Categories</h2>
                        </header>

						<table>

								<tr>
									<th> Category ID </th>
                                    <th> Category Name </th>
                                    <th colspan="1"> Category Options </th>
									
								</tr>

								{% for c in categories %}

								<tr>
									<td> {{c.category_id}} </td>
                                    <td> {{c.category_name}} </td>
                                    <td> <a href='{{url_for('showCategoryItems',category_id=c.category_id)}}' >View Items </a></td>
									
								</tr>
								{% endfor %}

                        </table>
                </div>        
                        
                        <br><br>
                <div class = 'recent-items'>
                        <header>
                                <h2 class="font-weight-light">Recent Items</h2>
                        </header>
                    <table>

                                <tr>
                                    <th> Item ID </th>
                                    <th> Item Name </th>
                                    <th> Item Description </th>
                                    <th> Category ID </th>
                                    <th> User ID </th>
                                    
                                </tr>
                                
                                {% for i in recentItemsAdded %}
                                <tr>
                                    <td> {{i.item_id}} </td>
                                    <td> {{i.item_name}} </td>
                                    <td> {{i.item_description}} </td>
                                    <td> {{i.category_id}} </td>
                                    <td> {{i.user_id}} </td>
                                </tr>
                                {% endfor %}
                    </table>

                </div>    
			</div>
		</body>
	
	</html>
	
	
	